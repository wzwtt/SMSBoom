name: ğŸš€ Run SMSBoom

# è§¦å‘ Action çš„æ¡ä»¶
on: 
 # æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:
    inputs:
      thread:
        description: 'çº¿ç¨‹æ•°(é»˜è®¤64)'
        required: true
        default: '64'
      phone:
        description: 'æ‰‹æœºå·'
        required: true
        default: ''
      frequency:
        description: 'æ‰§è¡Œæ¬¡æ•°(é»˜è®¤1æ¬¡)'
        required: true
        default: '1'
      interval:
        description: 'é—´éš”æ—¶é—´(é»˜è®¤60s)'
        required: true
        default: '60'
      enable_proxy:
        description: "å¼€å¯ä»£ç†"
        required: true
        default: "-e"
        type: choice
        options:
        - '-e'
        - ''

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # ç­¾å‡ºé¡¹ç›®ä»£ç 
      - uses: actions/checkout@v3
      # è®¾ç½® py3.8 ç¯å¢ƒ
      - name: ğŸš€ Set up Python 3.x
        uses: actions/setup-python@v3
        with:
          python-version: '3.8'
      
      - name: Download proxy lists
        run: |
          rm http_proxy.txt
          rm socks4_proxy.txt
          rm socks5_proxy.txt
          curl -o http_proxy.txt https://api.proxyscrape.com/v2/?request=getproxies&protocol=http&timeout=10000&country=all&ssl=all&anonymity=all
          curl -o socks4_proxy.txt https://api.proxyscrape.com/v2/?request=getproxies&protocol=socks4&timeout=10000&country=all
          curl -o socks5_proxy.txt https://api.proxyscrape.com/v2/?request=getproxies&protocol=socks5&timeout=10000&country=all
      
      - name: ğŸš€ Run SMSBoom Script
        # æ­¤å¤„å¯ä»¥è‡ªå®šä¹‰å‘½ä»¤è¡Œè¿è¡Œå‚æ•°.æ›¿æ¢æ‰‹æœºå·
        run: |
          pip3 install -r requirements.txt
          python3 smsboom.py update
          python3 smsboom.py run -t ${{ github.event.inputs.thread }} -p ${{ github.event.inputs.phone }} -f ${{ github.event.inputs.frequency }} -i ${{ github.event.inputs.interval }} ${{ github.event.inputs.enable_proxy }}
